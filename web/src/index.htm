<!DOCTYPE html>
<html>
  <head>
    <title>STORINATOR Switch</title>
    <!-- TODO icon -->
    <link rel="icon" type="image/png" href="power.png" />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <h2>STORINATOR</h2>

    <div class="statusContainer">
      <div class="led-box">
        <div id="powerLed" class="led-off"></div>
        <p>Power</p>
      </div>
      <div class="led-box">
        <div id="hddLed" class="led-off"></div>
        <p>HDD</p>
      </div>
    </div>

    <div class="operationContainer">
      <button type="button" class="powerOnButton" onclick="powerOn()">
        POWER ON
      </button>
      <button type="button" class="standbyButton" onclick="standBy()">
        STANDBY
      </button>
      <button type="button" class="resetButton" onclick="reset()">RESET</button>
      <button type="button" class="hddButton">HDD</button>
    </div>

    <script>
      var state = false

      function powerOn() {
        RequestMachine('powerOn')
      }

      function standBy() {
        RequestMachine('standBy')
      }

      function reset() {
        RequestMachine('reset')
      }

      function togglePowerLed(state) {
        const powerLed = document.getElementById('powerLed')
        if (state) {
          powerLed.classList.remove('led-off')
          powerLed.classList.add('led-green')
        } else {
          powerLed.classList.remove('led-green')
          powerLed.classList.add('led-off')
        }
      }

      function toggleHddLed(state) {
        const hddLed = document.getElementById('hddLed')
        if (state) {
          hddLed.classList.remove('led-off')
          hddLed.classList.add('led-blue')
        } else {
          hddLed.classList.remove('led-blue')
          hddLed.classList.add('led-off')
        }
      }

      function RequestMachine(type) {
        if (!confirm(type.toUpperCase())) return

        var xhttp = new XMLHttpRequest()
        xhttp.onreadystatechange = function () {
          if (this.readyState == 4 && this.status == 200) {
            alert('Action confirmed.')
            console.log(this.responseText)
          }
        }
        xhttp.open('GET', type, true)
        xhttp.send()
      }
    </script>
  </body>
</html>
